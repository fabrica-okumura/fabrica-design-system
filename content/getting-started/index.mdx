# Getting Started

## 導入手順

### 1. 同期

スターター（`fabrica-product-starter`）で Aリポ→Bリポ同期を実行します。

```bash
npm run sync:ds
```

### 2. CSS読み込み

スターターの `src/app/globals.css` でローカルCSSを読み込みます。

```css
@import "../styles/globals.css";
```

### 3. 利用例

```tsx
import { Button } from "@/components/ui/button";

export default function Example() {
  return <Button>保存</Button>;
}
```

## 依存関係

依存関係はスターター側で管理します。

## 必要バージョン

- Node.js v22 以上（`style-dictionary` の要件に合わせる）
- npm（pnpm / Yarn は使用しません）

## 初期セットアップ

1. 依存関係をインストール: `npm install`
2. 開発サーバーを起動: `npm run dev`
3. SVG アイコンの変更がある場合は `npm run watch:icons` を別ターミナルで起動

## よく使うスクリプト

- `npm run dev`: Next.js 開発サーバーを起動
- `npm run build`: 本番ビルドを作成
- `npm run lint`: Lint チェック
- `npm run storybook`: Storybook を起動（ポート 6006）
- `npm run watch:icons`: `public/icons/*.svg` の変更を監視して `icon-definitions.ts` を再生成
- `npm run generate:icons`: アイコン定義の手動再生成

## MCPサーバー（ローカル）

MCPサーバーは `mcp-server/` にあり、標準入出力（stdio）で起動します。

```bash
cd mcp-server
npm install
npm run build
npm run mcp
```

## デプロイ（Vercel）

docs は `https://fabrica-design-system.vercel.app/` にデプロイ済みです。  
GitHub に push すると自動デプロイされます。

## アイコン運用

- 新しい SVG アイコンは `public/icons/` に配置
- 開発中は `npm run watch:icons` を常駐
- PR 作成前に `icon-definitions.ts` に差分がないか確認

## CSS / デザイントークン運用

### フォント設定

デフォルトフォントは **Noto Sans JP**。`next/font/google` を使用し、
`src/app/globals.css` でフォールバックフォントを設定しています。

### デザイントークン運用

- Figma からエクスポートしたトークンを `tokens/` に配置
- `node scripts/remove-japanese-tokens.mjs` を実行
- `npx style-dictionary build` を実行（出力先: `src/styles/variables.css`）
- `node scripts/postprocess-design-tokens.mjs` を実行し、rem 値とプレフィックスを調整

## フロントエンドガイドライン（抜粋）

### TypeScript

- `any` は避ける
- Client Component では先頭に `'use client'`
- React 19 の非推奨 API は使わない

### CSS

- Tailwind ユーティリティを基本とする
- `globals.css` / `variables.css` のトークンを使う
- `bg-[--token]` 形式（canonical class）を使用

### コンポーネント

- `src/components/ui` は低レベル UI
- `src/components/layout` はページ構造・レイアウト用コンポーネント
- `asChild` でタグ差し替えを許可

### アイコン

- `lucide-react` ではなく `Icon` を使う
- `public/icons` と `icon-definitions.ts` を同期する

### 画像・リンク

- 画像は `next/image`
- リンクは `next/link`

### 命名規則

- ファイル/ディレクトリは kebab-case

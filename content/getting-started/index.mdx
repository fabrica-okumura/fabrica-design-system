# Getting Started

このページは **Aリポ（`fabrica-design-system`）と Bリポ（`fabrica-product-starter`）を同時に使う前提** の最短導入手順です。  
詳細な運用ルール（アイコン運用、フロントエンドガイドライン、責務分離など）は **Aリポの** `fabrica-design-system/README.md` を正本として参照してください。

## 用語

- **Aリポ**: `fabrica-design-system`（デザインシステム本体 + デザインシステムWebサイト）
- **Bリポ**: `fabrica-product-starter`（利用側スターター）

## 前提: A/Bを同階層に配置する

まず、AリポとBリポを同じ親ディレクトリ配下に配置します。

```text
your-workspace/
├── fabrica-design-system   # Aリポ
└── fabrica-product-starter # Bリポ
```

この配置を前提に、Bリポの同期コマンドは `../fabrica-design-system` を参照します。

## 必要バージョン

- Node.js v22 以上
- npm（pnpm / Yarn は使いません）

## クイックスタート（開発者 / Bリポ利用者向け）

通常の開発者は **Bリポから開始** します。

### 1) Bリポで A→B 同期

```bash
cd fabrica-product-starter
npm run sync:ds
```

この同期では、Aリポの再利用コードをBリポへ反映します。依存関係やAリポ専用の内容は同期されません。

依存関係（`package.json`）は **AリポとBリポで別管理** します。Aリポはデザインシステム本体/ドキュメント運用、Bリポはプロダクト実行環境という役割の違いがあるため、必要なパッケージ（`dependencies` / `devDependencies`）とバージョン方針は一致しません。  
そのため、Aリポで追加した依存関係は `sync:ds` でBリポへ自動反映されないので、必要に応じて `npm run check:deps` で差分確認して追加インストールします。

### 2) Bリポで依存関係をインストール

```bash
npm install
```

### 3) 開発サーバー起動

```bash
npm run dev
```

## Aリポ担当者向け（デザインシステム更新時）

Aリポを更新するのは、原則デザインシステム担当です。

```bash
cd fabrica-design-system
npm install
npm run dev
```

必要に応じて Storybook を使って検証します。

```bash
npm run storybook
```

## MCP（任意）

MCPは必須ではありません。  
ただし、AIに仕様確認や実装相談をする場合は、Aリポのコンテキスト参照精度を上げられます。

### 使う場合の起動手順

#### Aリポを開いて使う場合

初回、または `mcp-server/` を更新したときだけビルドします。

```bash
cd fabrica-design-system/mcp-server
npm install
npm run build
```

ビルド後に`.cursor/mcp.json` の設定にしたがって MCP を利用できます。

#### Bリポを開いて使う場合

Bリポ側の `.cursor/mcp.json` と `package.json` に Aリポ参照設定がある前提です。  
次を確認してください。

- AリポとBリポが同階層にある（`../fabrica-design-system` が有効）
- Aリポの `mcp-server` がビルド済み（上記コマンド）

BリポからMCPを使い始める場合は、Bリポのルートで次を実行します。

```bash
cd fabrica-product-starter
npm run mcp
```

### 利用例

- 仕様確認: 「Button の variant と size の一覧を教えて」
- 実装相談: 「この画面に Switch を追加する実装例を出して」
- トークン確認: 「`--color-primary` の値と利用箇所を教えて」

## 詳細ルールの参照先

- Aリポ運用ルール: `fabrica-design-system/README.md`
- Bリポ運用ルール（利用側編集範囲・同期運用）: `fabrica-product-starter/README.md`
- A/B責務と同期境界: `fabrica-design-system/README.md` の「ディレクトリ責務」「配布方針」「ルールの責務分離」
